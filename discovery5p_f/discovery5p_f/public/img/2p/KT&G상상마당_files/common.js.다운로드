$(document).ready(function(){

	// select
	$("select").select2({
		minimumResultsForSearch: Infinity
	});

	// Lazy Load
	$("img.lazy").lazyload({
		effect : "fadeIn"
	});

	// 검색버튼 클릭시 제어
	$("#headSerachOpen, #headSerachClose").bind('click',function(e){
		e.preventDefault();
		if($('#header').hasClass('searchopen') === false){
			$('#header').addClass('searchopen');
		} else {
			$('#header').removeClass('searchopen');
		}
	});
	
	// 검색어삭제 버튼 클릭시 키워드 단어 삭제
	$("#bt_keywordremove").bind('click',function(e){
		e.preventDefault();
		$('#searchTxt').val("");
	});
	
	// 햄버거메뉴 제어
	$("#headerGnb, #closeGnb").bind('click',function(e){
		e.preventDefault();

		var gnbStatus = $("#allMenuGnb").attr("data-allgnb");
		var scrHight = $(window).height();
		var re_height = $(window).height() - $(".gnbtop").outerHeight() - "50";
		if(gnbStatus === "close"){
			
			$("body").css("height", +scrHight+ "px").addClass("overhd");
			$("#allMenuGnb").attr("data-allgnb","open");
			$("#allMenuGnb").bPopup({
				modalClose: true,
				speed: 250,
				position: [0, 0],
				positionStyle: 'fixed',
				transition: 'slideIn',
				transitionClose: 'slideIn',
				onClose: function(){
					$("body").css({"height": "auto"}).removeClass("overhd");
					$("#allMenuGnb").attr("data-allgnb","close");
				}
			});
			$("#allMenuGnb .allmenu_scrollwrap").css({"height":re_height});
		} else {
			$("body").css({"height": "auto"}).removeClass("overhd");
			$("#allMenuGnb").attr("data-allgnb","close");
		}
	});
	$(window).resize(function(argument) {
		var re_height =$(window).height() - $(".gnbtop").outerHeight() - "50";
		$("#allMenuGnb .allmenu_scrollwrap").css({"height":re_height});
	});


	$("#allMenuGnb .depth1 > h3 > a").bind('click',function(e){
		if($(this).closest(".depth1").hasClass("active") === false){
			$("#allMenuGnb .depth1").removeClass("active");
			$(this).closest(".depth1").addClass("active");
		} else {
			$("#allMenuGnb .depth1").removeClass("active");
		}
	});
	// Footer 메뉴 제어
	$(".fbtn_contact , .footarea > .areaname").bind('click',function(e){
		e.preventDefault();
		if($(this).closest("li").hasClass("active") === false){
			$(".foot_arealist > li").removeClass("active");
			$(this).closest("li").addClass("active");
		} else {
			$(this).closest("li").removeClass("active");
		}
	});

	// 스크롤 탑바/상단가기 버튼
	$(window).scroll(function () {
		if ($(this).scrollTop() > 500) {
			$('.btntop').fadeIn();
		} else {
			$('.btntop').fadeOut();
		}
	});
	// scroll body to 0px on click
	$('#TopMove').bind("click", function(e) {
		// Prevents the default action to be triggered.
		e.preventDefault();

		$('body,html').animate({
			scrollTop: 0
		}, 500);
	});

	// 최상단 띠배너 닫기버튼 제어
	$("#topBannerClose").bind('click', function(e) {
		e.preventDefault();

		if($('#wrap').hasClass('topbanactive') === true){
			$('#wrap').removeClass('topbanactive');
			$(".topbanner_wrap").slideUp("fast");
		}

		mainPopCookieSet();
	});

	// 체크리스트부분 더보기 확장
	$("#chkExpend").bind("click", function(e) {
		// Prevents the default action to be triggered.
		e.preventDefault();

		$(this).parent().parent().find(".chk_listlimit").toggleClass("expend");
	});

	// 노출제한 더보기 확장
	$(".bt_limitmore").bind("click", function(e) {
		// Prevents the default action to be triggered.
		e.preventDefault();

		$(this).parent().find(".expolimit").toggleClass("expend");
	});

	// 탭메뉴 제어
	$(".tabmenu_wrap > li").bind('click',function(e){
		// Prevents the default action to be triggered.
		e.preventDefault();
		var index = $(this).parents(".tabmenu_wrap").find("li").index(this);
		var status = $(this).parent("li").attr("class");
		var id = $(this).attr("id");

		if( status !== "active" ){
			if (id !="" && id != undefined) {
				$(this).parents(".tabmenu_wrap").find("li").removeClass("active");
				$(this).addClass("active");
				$(".tabmenu_window .tabview_wrap").hide();
				var tabId = id.replace("li_", "");
				$(".tabmenu_window").find("#" + tabId).show();
			}else {
				$(this).parents(".tabmenu_wrap").find("li").removeClass("active");
				$(this).parents(".tabmenu_wrap").find("li:eq("+index+")").addClass("active");
				$(this).parents(".tabmenu_wrap").next(".tabmenu_window").find(".tabview_wrap").hide();
				$(this).parents(".tabmenu_wrap").next(".tabmenu_window").find(".tabview_wrap:eq("+index+")").show();
			}
		}
	});

	// 더보기 클릭시 탭메뉴 제어
	$(".href--index").bind('click',function(e) {
		e.preventDefault();

		var position = $('#tabUpHesh').offset(); // 위치값
	    $('html,body').animate({scrollTop : position.top-85}, 100); // 이동

		var tabIndex = $(this).attr("data-menuIndex");
		var tabId = $(this).attr("tab-id");

		$(".tabmenu_wrap > li").removeClass("active");
		$(".tabmenu_window .tabview_wrap").hide();

		if (tabId !="" && tabId != undefined) {
			$(".tabmenu_wrap").find("#li_" + tabId).addClass("active");
			$(".tabmenu_window").find("#" + tabId).show();
		}else {
			$(".tabmenu_wrap > li:eq("+tabIndex+")").addClass("active");
			$(".tabmenu_window .tabview_wrap:eq("+tabIndex+")").show();
		}
	});

	// SNS공유버튼 클릭 제어
	$("#asidesShareSns #asideBtnshareOpen, #asidesShareSns #asideBtnshareClose").bind('click', function(e) {
		e.preventDefault();

		if($("#asidesShareSns").hasClass('open') === false){
			$("#asidesShareSns").addClass('open');
			$('#asidesShareSns .btnshare_opencontrol').hide();
		} else {
			$("#asidesShareSns").removeClass('open');
			$('#asidesShareSns .btnshare_opencontrol').show();
		}
	});

	// 아코디언 메뉴1
	$(".accordlist1 .accordmore, .accordlist1 .accordmore2").bind('click', function(e) {
		e.preventDefault();
		if($(this).parent('dt').hasClass('active') === false){
			$(".accordlist1 dt").removeClass('active');
			$(this).parent('dt').addClass('active');
		} else {
			$(this).parent('dt').removeClass('active');
		}
	});

	// 갤러리 목록 모바일/태블릿일 경우 더보기 버튼으로 확장시키기 제어
	$('#btnGalleryMoreExpend').bind('click', function(e) {
		e.preventDefault();

		if($(this).parent().parent().parent().find('.gallerylimit').hasClass('expend') === false){
			$(this).parent().parent().parent().find('.gallerylimit').addClass('expend');
			$(this).children('.bt--mentmodify').text('접기');
		} else {
			$(this).parent().parent().parent().find('.gallerylimit').removeClass('expend');
			$(this).children('.bt--mentmodify').text('펼치기');
		}
	});

	//입력 table 하단 로커싱처리
	$('table[class*="brd_wrt"] td').on('focusin', function(e) {
		e.preventDefault();
		$(this).addClass('borclr_area');
	});
	$('table[class*="brd_wrt"] td').on('focusout', function(e) {
		e.preventDefault();
		$(this).removeClass('borclr_area');
	});

	//입력 dl 타입 하단 로커싱처리
	$('div[class*="dtl_wrt"] dl dd').not('dd.no_focus').on('focusin', function(e) {
		e.preventDefault();
		$(this).addClass('borclr_area');
	});
	$('div[class*="dtl_wrt"] dl dd').not('dd.no_focus').on('focusout', function(e) {
		e.preventDefault();
		$(this).removeClass('borclr_area');
	});

	//객실예약 - 객실 리스트 전용
	$('.layout_open > .subject').not('.layout_open:first-of-type > .subject, .default_open > .subject').next('.layout_open_con').hide();
	$('.layout_open:first-of-type, .default_open').addClass('active');
	$('.layout_open:first-of-type > .subject, .default_open > .subject').children('.cscon').addClass('on');
	$('.layout_open > .subject').bind('click', function(e) {
		e.preventDefault();

		if(!$(this).parent().hasClass('active')){
			$(this).parent().addClass('active');
			$(this).children('.cscon').addClass('on');
			$(this).next('.layout_open_con').slideDown(300);
		} else {
			$(this).parent().removeClass('active');
			$(this).children('.cscon').removeClass('on');
			$(this).next('.layout_open_con').slideUp(300);
		}
	});

	//예약/결제 정보
	$('.reserve_title .description_box').hide();
	$('.reserve_title > .description').bind('click', function(e) {
		e.preventDefault();

		if($(this).next('.description_box').css('display')=="none"){
			$('.reserve_title .description_box').slideUp(200);
			$(this).next('.description_box').slideDown(200);
		} else {
			$(this).next('.description_box').slideUp(200);
		}
	});

	//캠핑장 선택
	$('.camp_map_box ol > li > div.disabled > a').bind('click', function(e) {
		e.preventDefault();
	});
	$('.camp_map_box ol > li > div > a').not('.disabled > a').bind('click', function(e) {
		e.preventDefault();

		if(!$(this).parent().hasClass('check')){
			$(this).parents('.camp_map_box').find('a').parent().removeClass('check');
			$(this).parent().addClass('check');
		} else {
			$(this).parent().removeClass('check');
		}

	});

	//아티스트 선정작 프로그래스바
    startAnimation();

     function startAnimation(){
      	$('.progress').each(function(){

	        $(this).find('.progressbar').animate({
	          width:$(this).attr('data-percent')
	        },6000);

    	});
     }

	 // picker
	$('.picker_wrap > a').bind('click',function(e){
		e.preventDefault();
		$(this).closest('.picker_wrap').find('a').removeClass('active');
		$(this).addClass('active');
	});

	// pc만 tel링크 전체 삭제 ()
	function pcmobileCheck(){
		var filter = "win16|win32|win64|mac";
		if(navigator.platform){
			if(0 > filter.indexOf(navigator.platform.toLowerCase())){
				//console.log("mobile");
				$('.next_over').next().remove(); // gallery_list
			}else{
				//console.log("PC");
				$('a[href^="tel"]').bind('click',function(){
					return false;
				});
			};
		};
	};
	pcmobileCheck();
	
});



